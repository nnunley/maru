
error: undefined variable: compiler
[32m[?7l...         [0m compiler
[?7h[32m[?7lemit-c-proper.l:371[0m (compiler (+ 1 (<compiler>-level ocomp)))
[?7h[32m[?7lemit-c-proper.l:368[0m (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*))))))
[?7h[32m[?7lemit-c-proper.l:368[0m (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*)))))))
[?7h[32m[?7lemit-c-proper.l:368[0m (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*))))))))
[?7h[32m[?7lemit-c-proper.l:368[0m (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*)))))))))
[?7h[32m[?7lemit-c-proper.l:367[0m (if (= *emit-backend* (quote c)) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*))))))))) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((tnam (if main (LABEL name) (LABEL (temp-label-name))))) (let ((vnam (if main () (LABEL name)))) (let ((params (map-with gen-param (cadr defn) comp))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((arg-size (align 16 (<compiler>-arg-limit comp)))) (let ((tmp-size (align 16 (+ arg-size (<compiler>-tmp-limit comp))))) (let ((frm-size (align 16 (+ tmp-size 8)))) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ arg-size (oop-at (%typecheck <TI32> tmp) 0)))) (<compiler>-temps comp)) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ frm-size (oop-at (%typecheck <TI32> tmp) 0)))) params) (emit TEXT) (and main (emit GLOBAL tnam)) (emit DEFLABEL tnam) (emit COMMENT (list "frame " arg-size " " (<compiler>-tmp-limit comp) " " tmp-size " " frm-size)) (emit ENTER (- frm-size 8)) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (emit DEFLABEL (<compiler>-epilogue comp))) (emit LEAVE (- frm-size 8))))) (or main (let () (gen ocomp DATA) (gen ocomp GLOBAL vnam) (gen ocomp DEFLABEL vnam) (gen ocomp LONG tnam) (gen ocomp TEXT)))))))))))
[?7h[32m[?7l...                [0m (let () (if (= *emit-backend* (quote c)) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*))))))))) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((tnam (if main (LABEL name) (LABEL (temp-label-name))))) (let ((vnam (if main () (LABEL name)))) (let ((params (map-with gen-param (cadr defn) comp))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((arg-size (align 16 (<compiler>-arg-limit comp)))) (let ((tmp-size (align 16 (+ arg-size (<compiler>-tmp-limit comp))))) (let ((frm-size (align 16 (+ tmp-size 8)))) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ arg-size (oop-at (%typecheck <TI32> tmp) 0)))) (<compiler>-temps comp)) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ frm-size (oop-at (%typecheck <TI32> tmp) 0)))) params) (emit TEXT) (and main (emit GLOBAL tnam)) (emit DEFLABEL tnam) (emit COMMENT (list "frame " arg-size " " (<compiler>-tmp-limit comp) " " tmp-size " " frm-size)) (emit ENTER (- frm-size 8)) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (emit DEFLABEL (<compiler>-epilogue comp))) (emit LEAVE (- frm-size 8))))) (or main (let () (gen ocomp DATA) (gen ocomp GLOBAL vnam) (gen ocomp DEFLABEL vnam) (gen ocomp LONG tnam) (gen ocomp TEXT))))))))))))
[?7h[32m[?7l...                [0m (let () (let () (if (= *emit-backend* (quote c)) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*))))))))) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((tnam (if main (LABEL name) (LABEL (temp-label-name))))) (let ((vnam (if main () (LABEL name)))) (let ((params (map-with gen-param (cadr defn) comp))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((arg-size (align 16 (<compiler>-arg-limit comp)))) (let ((tmp-size (align 16 (+ arg-size (<compiler>-tmp-limit comp))))) (let ((frm-size (align 16 (+ tmp-size 8)))) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ arg-size (oop-at (%typecheck <TI32> tmp) 0)))) (<compiler>-temps comp)) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ frm-size (oop-at (%typecheck <TI32> tmp) 0)))) params) (emit TEXT) (and main (emit GLOBAL tnam)) (emit DEFLABEL tnam) (emit COMMENT (list "frame " arg-size " " (<compiler>-tmp-limit comp) " " tmp-size " " frm-size)) (emit ENTER (- frm-size 8)) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (emit DEFLABEL (<compiler>-epilogue comp))) (emit LEAVE (- frm-size 8))))) (or main (let () (gen ocomp DATA) (gen ocomp GLOBAL vnam) (gen ocomp DEFLABEL vnam) (gen ocomp LONG tnam) (gen ocomp TEXT)))))))))))))
[?7h[32m[?7l...                [0m (lambda (self name ocomp) (let () (let () (if (= *emit-backend* (quote c)) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (let ((_list_ params)) (while _list_ (let ((param (car _list_))) (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param))) (set _list_ (cdr _list_))))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (let ((i 0) (_limit_ (>> max-args 2))) (while (< i _limit_) (c-indent) (println "oop _arg_" i " = nil;") (set i (+ i 1))))) (let ((max-temps (<compiler>-tmp-limit comp))) (let ((i 0) (_limit_ (>> max-temps 2))) (while (< i _limit_) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;") (set i (+ i 1))))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*))))))))) (let ((main (= (quote main) name))) (let ((defn (oop-at (%typecheck <expr> self) 1))) (let ((body (cddr defn))) (let ((comp (compiler (+ 1 (<compiler>-level ocomp))))) (let ((tnam (if main (LABEL name) (LABEL (temp-label-name))))) (let ((vnam (if main () (LABEL name)))) (let ((params (map-with gen-param (cadr defn) comp))) (let ((_list_ body)) (while _list_ (let ((e (car _list_))) (gen e comp)) (set _list_ (cdr _list_)))) (let ((arg-size (align 16 (<compiler>-arg-limit comp)))) (let ((tmp-size (align 16 (+ arg-size (<compiler>-tmp-limit comp))))) (let ((frm-size (align 16 (+ tmp-size 8)))) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ arg-size (oop-at (%typecheck <TI32> tmp) 0)))) (<compiler>-temps comp)) (map (lambda (tmp) (set-oop-at (%typecheck <TI32> tmp) 0 (+ frm-size (oop-at (%typecheck <TI32> tmp) 0)))) params) (emit TEXT) (and main (emit GLOBAL tnam)) (emit DEFLABEL tnam) (emit COMMENT (list "frame " arg-size " " (<compiler>-tmp-limit comp) " " tmp-size " " frm-size)) (emit ENTER (- frm-size 8)) (let ((i 0) (_limit_ (<compiler>-pc comp))) (while (< i _limit_) (apply emit (array-at (<compiler>-asm comp) i)) (set i (+ i 1)))) (and (<compiler>-epilogue comp) (emit DEFLABEL (<compiler>-epilogue comp))) (emit LEAVE (- frm-size 8))))) (or main (let () (gen ocomp DATA) (gen ocomp GLOBAL vnam) (gen ocomp DEFLABEL vnam) (gen ocomp LONG tnam) (gen ocomp TEXT))))))))))))))
[?7h[32m[?7lboot.l:552         [0m (eval (cons (Fixed<quote> lambda) (cons args (cons (cons (Fixed<quote> with-instance-accessors) (cons type body)) (Fixed<quote> ())))))
[?7h[32m[?7lboot.l:552         [0m (<selector>-add-method self type (eval (cons (Fixed<quote> lambda) (cons args (cons (cons (Fixed<quote> with-instance-accessors) (cons type body)) (Fixed<quote> ()))))))
[?7h[32m[?7lboot.l:517         [0m (apply (Fixed<or> (array-at (oop-at (%typecheck <selector> self) 1) (type-of (car arguments))) (<selector>-inherit (oop-at (%typecheck <selector> self) 1) (type-of (car arguments))) (oop-at (%typecheck <selector> self) 2)) arguments)
[?7h[32m[?7lemit-c-proper.l:366[0m (add-method gen-definition <expr> (Fixed<quote> (self name ocomp)) (Fixed<quote> ((if (= *emit-backend* (quote c)) (let* ((main (= (quote main) name)) (defn (<expr>-defn self)) (body (cddr defn)) (comp (compiler (+ 1 (<compiler>-level ocomp)))) (params (map-with gen-param (cadr defn) comp))) (print "static oop " name "(") (let ((first 1)) (list-do param params (and (not first) (print ", ")) (set first ()) (print "oop " (c-param-name param)))) (println ")") (println "{") (set *c-indent* 1) (c-indent) (println "oop _eax = nil;") (let ((max-args (<compiler>-arg-limit comp))) (for (i 0 (>> max-args 2)) (c-indent) (println "oop _arg_" i " = nil;"))) (let ((max-temps (<compiler>-tmp-limit comp))) (for (i 0 (>> max-temps 2)) (c-indent) (println "oop " (c-temp-name (TI32 (* i 4))) " = nil;"))) (list-do e body (gen e comp)) (for (i 0 (<compiler>-pc comp)) (apply emit (array-at (<compiler>-asm comp) i))) (and (<compiler>-epilogue comp) (let () (println (<compiler>-epilogue comp) ":") (c-indent))) (println "return _eax;") (set *c-indent* 0) (println "}") (println) (set *c-functions* (cons name *c-functions*)) (or main (let () (println "static oop v_" name " = (oop)" name ";") (set *c-globals* (cons name *c-globals*))))) (let* ((main (= (quote main) name)) (defn (<expr>-defn self)) (body (cddr defn)) (comp (compiler (+ 1 (<compiler>-level ocomp)))) (tnam (if main (LABEL name) (LABEL (temp-label-name)))) (vnam (if main () (LABEL name))) (params (map-with gen-param (cadr defn) comp))) (list-do e body (gen e comp)) (let* ((arg-size (align 16 (<compiler>-arg-limit comp))) (tmp-size (align 16 (+ arg-size (<compiler>-tmp-limit comp)))) (frm-size (align 16 (+ tmp-size 8)))) (map (lambda (tmp) (set (<TI32>-offset tmp) (+ arg-size (<TI32>-offset tmp)))) (<compiler>-temps comp)) (map (lambda (tmp) (set (<TI32>-offset tmp) (+ frm-size (<TI32>-offset tmp)))) params) (emit TEXT) (and main (emit GLOBAL tnam)) (emit DEFLABEL tnam) (emit COMMENT (list "frame " arg-size " " (<compiler>-tmp-limit comp) " " tmp-size " " frm-size)) (emit ENTER (- frm-size 8)) (for (i 0 (<compiler>-pc comp)) (apply emit (array-at (<compiler>-asm comp) i))) (and (<compiler>-epilogue comp) (emit DEFLABEL (<compiler>-epilogue comp))) (emit LEAVE (- frm-size 8))) (or main (let () (gen ocomp DATA) (gen ocomp GLOBAL vnam) (gen ocomp DEFLABEL vnam) (gen ocomp LONG tnam) (gen ocomp TEXT))))))))
[?7h[32m[?7lboot.l:996         [0m (eval expr)
[?7h[32m[?7lboot.l:996         [0m (Fixed<let> ((result (eval expr))) (Fixed<and> (> (verbose) 1) (println "=> " result)) result)
[?7h[32m[?7lboot.l:1007        [0m (pval expr)
[?7h[32m[?7lboot.l:1007        [0m (Fixed<let> ((expr (car _list_))) (pval expr))
[?7h[32m[?7lboot.l:1007        [0m (Fixed<while> _list_ (Fixed<let> ((expr (car _list_))) (pval expr)) (Fixed<set> _list_ (cdr _list_)))
[?7h[32m[?7lboot.l:1007        [0m (Fixed<let> ((_list_ exps)) (Fixed<while> _list_ (Fixed<let> ((expr (car _list_))) (pval expr)) (Fixed<set> _list_ (cdr _list_))))
[?7h[32m[?7lboot.l:1005        [0m (Fixed<let> ((exps (find-and-read name))) (Fixed<or> exps (error "file not found or empty: " name)) (Fixed<let> ((_list_ exps)) (Fixed<while> _list_ (Fixed<let> ((expr (car _list_))) (pval expr)) (Fixed<set> _list_ (cdr _list_)))))
[?7h[32m[?7lboot.l:1015        [0m (load name)
[?7h[32m[?7lboot.l:1013        [0m (Fixed<let> () (Fixed<set> *loaded* (cons name *loaded*)) (load name))
[?7h[32m[?7lboot.l:1012        [0m (Fixed<or> (member? name *loaded*) (Fixed<let> () (Fixed<set> *loaded* (cons name *loaded*)) (load name)))
[?7h[32m[?7ltest-c-eval-style.l:10[0m (require "emit-c-proper.l")
[?7h